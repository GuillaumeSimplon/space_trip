{# templates/resort/index.html.twig #}

{% extends 'base.html.twig' %}
{% import 'components/button.html.twig' as button %}

{% block title %}Liste des Resorts{% endblock %}

{% block body %}
<div id="slider">
    <ul class="sliderList">
        {% for resort in resorts %}
        <li>
            <div class="resortContainer" style="background-image: url('{{ asset("img/Resorts/" ~ resort.getImage()) }}')">

            <div class="titleResortContainer">
                <div class="title">
                    <div class="pictoAndSubtitle">
                        <div class="picto"><i class="far fa-dot-circle"></i></div>
                        <h2>{{ resort.getName() }}</h2>

                        {% block button %}
                        {% include 'components/button.html.twig' with {'textBtn': 'Book now', 'linkUrl': '/booking'} %}
                        {% endblock %}
                    </div>
                </div>

                <div class="separateSubtitles"></div>

                <div class="underSubtitles">to embark on a unique journey that will live forever in your memories</div>
            </div>




            <p>{{ resort.getDescription() }}</p>
            <p>Place: {{ resort.getPlace() }}</p>
            <p>Area: {{ resort.getArea() }}</p>
            <p>Starting Price: {{ resort.getStartingPrice() }}</p>
</div>
</li>
{% endfor %}
</ul>

<button id="prevBtn" onclick="changeSlide(-1)">❮</button>
<button id="nextBtn" onclick="changeSlide(1)">❯</button>
</div>


<style>
    body {
        margin: 0;
        padding: 0;
        background-color: #00071F;
        color: white;
    }

    #slider {
        position: relative;
        width: 100%;
        overflow: hidden;
    }

    .sliderList {
        list-style-type: none;
        margin: 0;
        padding: 0;
        display: flex;
        transition: transform 0.5s ease-in-out;
    }

    .resortContainer {
        width: 100%;
        height: 100vh;
        box-sizing: border-box;
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: relative;
    }

    li {
        width: 100%;
        box-sizing: border-box;
        display: none;
        /* Masquer tous les éléments initialement */
    }

    li:first-child {
        display: block;
        /* Afficher le premier élément */
    }

    .titleResortContainer {
        display: flex;
        flex-direction: column;
        margin-top: 80px;
    }

    button {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        font-size: 20px;
        background: none;
        border: none;
        color: white;
        cursor: pointer;
    }

    #prevBtn {
        z-index: 9999;
        left: 5%;
    }

    #nextBtn {
        right: 5%;
    }
</style>


<script>
    let currentIndex = 0;

    function changeSlide(n) {
        currentIndex += n;
        showSlide();
    }

    function showSlide() {
        const slides = document.querySelector('.sliderList');
        const slideItems = slides.children;

        if (currentIndex < 0) {
            currentIndex = slideItems.length - 1;
        } else if (currentIndex >= slideItems.length) {
            currentIndex = 0;
        }

        for (let i = 0; i < slideItems.length; i++) {
            slideItems[i].style.display = 'none';
        }

        slideItems[currentIndex].style.display = 'block';
    }

    document.addEventListener("DOMContentLoaded", showSlide);
</script>

{% endblock %}